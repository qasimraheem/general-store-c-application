#include"stdafx.h"
#include"Header.h"
#include"global_variables.h"
#include"function_define.h"

void setup_loading()
{
	system("CLS");
	cout << "               ***********" << endl; Sleep(45);
	cout << "                            ***" << endl; Sleep(45);
	cout << "                                **" << endl; Sleep(45);
	cout << "                                  **" << endl; Sleep(45);
	cout << "                                    *" << endl; Sleep(45);
	cout << "                                     **" << endl; Sleep(45);
	cout << "                                      **" << endl; Sleep(45);
	cout << "                                       *" << endl; Sleep(45);
	cout << "                                        *" << endl; Sleep(45);
	cout << "                                        *" << endl; Sleep(45);
	cout << "                   SETUP                *" << endl; Sleep(45);
	cout << "                                        *" << endl; Sleep(45);
	cout << "                                        *" << endl; Sleep(45);
	cout << "                                       *" << endl; Sleep(45);
	cout << "                                      **" << endl; Sleep(45);
	cout << "                                     **" << endl; Sleep(45);
	cout << "                                    *" << endl; Sleep(45);
	cout << "                                  **" << endl; Sleep(45);
	cout << "                                **" << endl; Sleep(45);
	cout << "                            ***" << endl; Sleep(45);
	cout << "               ***********"; Sleep(45);
	for (int i = 0; i<45; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "          ***";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "       **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "     **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "    *";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "  **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << " **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << " *";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "*";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "*";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "*";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "*";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "*";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << " *";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << " **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "  **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "    *";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "     **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "       **";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{


		cout << "\b\b\b";
	}cout << "\r";
	cout << "          ***";
	Sleep(45);
	for (int i = 0; i<20; i++)
	{

		cout << "\b\b\b";
	}cout << "\r";
	cout << "               ***********\r";

	/*
	***********
	***               ***
	**                       **
	**                           **
	*                               *
	**                                 **
	**                                   **
	*                                     *
	*                                       *
	*                                       *
	*                                       *
	*                                       *
	*                                       *
	*                                     *
	**                                   **
	**                                 **
	*                               *
	**                           **
	**                       **
	***               ***
	***********
	*/

}

void save_setup()
{

	system("CLS");
	double percentvalue = 0;
	unsigned char tr = 191, tl = 218, dr = 217, dl = 192, v = 179, h = 196, t = 251, a = 219, b = 178, c = 177, d = 176;
	cout << "\n\n\n\n\n\n\n\n\n\n\n\n\n";
	cout << "  ";
	text(7 on 0);
	cout << tl;
	for (int i = 0; i < 110; i++)
	{
		cout << h;
	}
	cout << tr << endl;
	cout << "  ";
	cout << v;
	text(8 on 8);
	for (int i = 0; i < 110; i++)
	{
		cout << " ";
	}
	text(7 on 0);
	cout << v;
	cout << "0%" << endl;
	cout << "  ";
	cout << dl;
	for (int i = 0; i < 110; i++)
	{
		cout << h;
	}
	cout << dr << endl;
	for (int i = 0; i < 55; i++)
	{
		cout << " ";
	}
	cout << "INSTALLING";
	cout << "\r\b\b\r\b\b\r";
	for (int i = 0; i <= 113; i++)
	{


		for (int j = 0; j <i; j++)
		{
			Sleep(1);
			int devider;
			devider = j / 4;
			for (int k = 0; k < devider; k++)
			{
				cout << d;
			}
			for (int k = 0; k < devider; k++)
			{
				cout << c;
			}
			for (int k = 0; k < devider; k++)
			{
				cout << b;
			}
			for (int k = 0; k < devider; k++)
			{
				cout << a;
			}
			cout << "\n\r\b\b\b\b\b\b\b";
			/*
			text(8 on 8);
			for (int k = 110; k >devider*4 ; k--)
			{
			cout << " ";
			}
			*/

			text(7 on 0);
			percentvalue = i - (i*.11);
			cout << v << percentvalue << "%";
			cout << "\r  " << v;

		}



	}


	ofstream outfile;
	outfile.open("setup.xls");


	outfile << productkey << "\t" << coldstore << "\t" << username << "\t" << userpassword << endl;

	outfile.close();


}
void userdata()
{
	system("CLS");
	text(10);
	unsigned char tr = 187, tl = 201, dr = 188, dl = 200, v = 186, h = 205, t = 251;
	setup_loading();
	cout << "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n";
	do
	{
		cout << "                                         ";
		char user[30];//to store 
		user[0] = NULL;//to store username
		cout << "  ENTER YOUR STORE NAME----:";
		//to store password.
		int i = 0;
		char a;//a Temp char
		for (i = 0;;)//infinite loop
		{
			a = getch();//stores char typed in a

						//check if a is numeric or alphabet

			if (a != 8 && (a >= 'a'&&a <= 'z' || (a >= 'A'&&a <= 'Z' || a >= '0'&&a <= '9')) || (a == '-' || a == '_' || a == '.'))
			{
				if (a != 13)
				{
					user[i] = a;//stores a in pass
					++i;
					cout << a;
				}
			}
			if (a == '\b'&&i >= 1)//if user typed backspace
								  //i should be greater than 1.
			{
				cout << "\b \b";//rub the character behind the cursor.
				--i;
				if (i == 0)
				{
					user[0] = NULL;
				}
			}
			if (a == '\r'&&user[0] != '\0')//if enter is pressed
			{
				user[i] = '\0';//null means end of string.
				break;//break the loop
			}

		}

		coldstore = user;
		if (coldstore == user)
		{
			do
			{
				cout << "\n                                         ";
				user[30];//to store 
				user[0] = NULL;//to store username
				cout << "  ENTER USER NAME----------:";
				//to store password.
				int i = 0;
				char a;//a Temp char
				for (i = 0;;)//infinite loop
				{
					a = getch();//stores char typed in a

								//check if a is numeric or alphabet

					if (a != 8 && (a >= 'a'&&a <= 'z' || (a >= 'A'&&a <= 'Z' || a >= '0'&&a <= '9')) || (a == '-' || a == '_' || a == '.'))
					{
						if (a != 13)
						{
							user[i] = a;//stores a in pass
							++i;
							cout << a;
						}
					}
					if (a == '\b'&&i >= 1)//if user typed backspace
										  //i should be greater than 1.
					{
						cout << "\b \b";//rub the character behind the cursor.
						--i;
						if (i == 0)
						{
							user[0] = NULL;
						}
					}
					if (a == '\r'&&user[0] != '\0')//if enter is pressed
					{
						user[i] = '\0';//null means end of string.
						break;//break the loop
					}

				}

				username = user;
			} while (username != user);

			if (username == user)
			{
				do
				{
					cout << "\n                                         ";
					user[30];//to store 
					user[0] = NULL;//to store username
					cout << "  ENTER USER PASSWORD------:";
					//to store password.
					int i = 0;
					char a;//a Temp char
					for (i = 0;;)//infinite loop
					{
						a = getch();//stores char typed in a

									//check if a is numeric or alphabet

						if (a != 8 && (a >= 'a'&&a <= 'z' || (a >= 'A'&&a <= 'Z' || a >= '0'&&a <= '9')) || (a == '-' || a == '_' || a == '.'))
						{
							if (a != 13)
							{
								user[i] = a;//stores a in pass
								++i;
								cout << a;
							}
						}
						if (a == '\b'&&i >= 1)//if user typed backspace
											  //i should be greater than 1.
						{
							cout << "\b \b";//rub the character behind the cursor.
							--i;
							if (i == 0)
							{
								user[0] = NULL;
							}
						}
						if (a == '\r'&&user[0] != '\0')//if enter is pressed
						{
							user[i] = '\0';//null means end of string.
							break;//break the loop
						}

					}

					userpassword = user;
				} while (userpassword != user);

				if (userpassword == user)
				{
					do
					{
						cout << "\n                                           ";
						user[30];//to store 
						user[0] = NULL;//to store username
						cout << "CONFIRM USER PASSWORD----:";
						//to store password.
						int i = 0;
						char a;//a Temp char
						for (i = 0;;)//infinite loop
						{
							a = getch();//stores char typed in a

										//check if a is numeric or alphabet

							if (a != 8 && (a >= 'a'&&a <= 'z' || (a >= 'A'&&a <= 'Z' || a >= '0'&&a <= '9')) || (a == '-' || a == '_' || a == '.'))
							{
								if (a != 13)
								{
									user[i] = a;//stores a in pass
									++i;
									cout << a;
								}
							}
							if (a == '\b'&&i >= 1)//if user typed backspace
												  //i should be greater than 1.
							{
								cout << "\b \b";//rub the character behind the cursor.
								--i;
								if (i == 0)
								{
									user[0] = NULL;
								}
							}
							if (a == '\r'&&user[0] != '\0')//if enter is pressed
							{
								user[i] = '\0';//null means end of string.
								break;//break the loop
							}

						}
						userpassword == user;
						if (userpassword != user)
						{
							for (int i = 0; i < 115; i++)
							{
								cout << " \b\b";
							}cout << "\r";


						}
					} while (userpassword != user);
					if (user == userpassword)
					{
						//

						cout << "\n                                                                                         " << tl << h << h << h << h << h << h << tr << endl;
						cout << "                                                                                         " << v;
						text(0 on 10);
						cout << "INSTAL";
						text(10);
						cout << v << " PRESS ENTER TO INSTAL\n";
						cout << "                                                                                         " << dl << h << h << h << h << h << h << dr;
						char agree;
						do
						{
							agree = getch();
							if (agree == 13)
							{
								//
								save_setup();
								main();
							}
						} while (true);

					}
				}
			}

		}


	} while (true);
}
void setup_customine()
{
	system("CLS");
	unsigned char tr = 187, tl = 201, dr = 188, dl = 200, v = 186, h = 205, t = 251;
	string pro_k;
	char agree;
	text(14);
	setup_loading();
	cout << "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n";
	do
	{
		cout << "                                         ";
		cout << "ENTER PRODUCT KEY:";
		getline(cin, pro_k);
		if (pro_k == "xxxx-yyyy-xxxx-yyyy")
		{
			productkey = pro_k;
			cout << "                                         ";
			cout << "C:\\Users\\qasim\\Documents\\Visual Studio 2015\\Projects\\ConsoleApplication12" << endl;
			cout << "                                         ";
			cout << "LANGUAGE:ENGLISH ONLY\n";

			cout << "                                                                                         " << tl << h << h << h << h << tr << endl;
			cout << "                                                                                         " << v;
			text(0 on 14);
			cout << "NEXT";
			text(14);
			cout << v << " PRESS ENTER TO CONTINUE\n";
			cout << "                                                                                         " << dl << h << h << h << h << dr;
			do
			{
				agree = getch();
				if (agree == 13)
				{
					userdata();
				}
			} while (true);

		}
		else
		{

			for (int i = 0; i < 120; i++)
			{
				cout << " \b\b";
			}cout << "\r";

		}

	} while (true);

}
void setup_agrement()
{
	system("CLS");
	text(12);
	setup_loading();
	unsigned char tr = 187, tl = 201, dr = 188, dl = 200, v = 186, h = 205, t = 251;
	/*cout << tl << h << tr << endl;
	cout << v << t << v << endl;
	cout << dl << h << dr << endl;*/
	cout << "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n";
	cout << "                                         ";
	text(12);
	cout << tl << h << tr;
	text(12);
	cout << "AGREE TO CONTINUE!" << endl;
	cout << "                                         ";
	cout << v << " " << v;
	cout << "This software is developed by Qasim Raheem Khalid Mehmood." << endl;
	cout << "                                         ";
	cout << dl << h << dr;
	cout << "This is a program for general store.(http://www.stackjunction.io/)" << endl;
	cout << "                                            ";
	cout << "PRESS (A)KEY TO CONTINUE.";
	char agree = '\0';
	do
	{
		agree = getch();
		if (agree == 'a' || agree == 'A')
		{
			cout << "\r\b\b\b\b\r\r\b\b\b\b\r";
			cout << "                                         " << v << t;
			cout << "\n\n\n\n";
			cout << "                                                                                         " << tl << h << h << h << h << tr << endl;
			cout << "                                                                                         " << v;
			text(0 on 12);
			cout << "NEXT";
			text(12);
			cout << v << " PRESS ENTER TO CONTINUE\n";
			cout << "                                                                                         " << dl << h << h << h << h << dr;
			do
			{
				agree = getch();
				if (agree == 13)
				{
					setup_customine();
				}
			} while (true);

		}
	} while (true);



}
void read_setup()
{
	std::ifstream ifs("setup.xls");

	if (ifs.is_open())
	{
		string r_productkey, r_coldstore, r_username, r_password;
		while (!ifs.eof())
		{
			ifs >> r_productkey;
			ifs >> r_coldstore;
			ifs >> r_username;
			ifs >> r_password;
			//	cout<<roll<<"\t"<<sfnam<<"\t"<<ssnam<<"\t"<<ffnam<<"\t"<<fsnam<<"\t"<<rclass<<"\t"<<num<<endl;
			if (r_productkey == "xxxx-yyyy-xxxx-yyyy")
			{
				productkey = r_productkey;
				coldstore = r_coldstore;
				username = r_username;
				userpassword = r_password;

			}
		}
		ifs.close();

	}
	else {
		// show message:
		std::cout << "Error opening file";
	}
}




